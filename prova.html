<html>

<head>
</head>

<body>
    <h1>Cuenta atras</h1>
    <h2 id='CuentaAtras'></h2>

    <script language="JavaScript">
        /* Determinamos el tiempo total en segundos */
        var totalTiempo = 120;

        var timestampStart = new Date().getTime();
        var endTime = timestampStart + (totalTiempo * 1000);
        var timestampEnd = endTime - new Date().getTime();

        /* Variable que contiene el tiempo restante */
        var tiempRestante = totalTiempo;

        /* Ejecutamos la funcion updateReloj() al cargar la pagina */
        updateReloj();

        function updateReloj() {
            var Seconds = tiempRestante;

            var Days = Math.floor(Seconds / 86400);
            Seconds -= Days * 86400;

            var Hours = Math.floor(Seconds / 3600);
            Seconds -= Hours * (3600);

            var Minutes = Math.floor(Seconds / 60);
            Seconds -= Minutes * (60);

            var TimeStr = ((Days > 0) ? Days + " dias " : "") + LeadingZero(Hours) + ":" + LeadingZero(Minutes) + ":" + LeadingZero(Seconds);
            /* Este muestra el total de hora, aunque sea superior a 24 horas */
            //var TimeStr = LeadingZero(Hours+(Days*24)) + ":" + LeadingZero(Minutes) + ":" + LeadingZero(Seconds);

            document.getElementById('CuentaAtras').innerHTML = TimeStr;
            if (endTime <= new Date().getTime()) {
                document.getElementById('CuentaAtras').innerHTML = "00:00:00";
            } else {
                /* Restamos un segundo al tiempo restante */
                tiempRestante -= 1;
                /* Ejecutamos nuevamente la funciÃ³n al pasar 1000 milisegundos (1 segundo) */
                setTimeout("updateReloj()", 1000);
            }
        }

        /* Funcion que pone un 0 delante de un valor si es necesario */
        function LeadingZero(Time) {
            return (Time < 10) ? "0" + Time : +Time;
        }
        //-->
    </script>

</body>

</html>
